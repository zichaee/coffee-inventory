PRAGMA defer_foreign_keys=TRUE;
CREATE TABLE user_roles (   user_role_name text primary key,   access_users_read integer not null,   access_users_write integer not null,   access_catalogue_read integer not null,   access_catalogue_write integer not null,   access_inventory_read integer not null,   access_inventory_write integer not null,   access_orders_read integer not null,   access_orders_write integer not null,   access_gradings_read integer not null,   access_gradings_write integer not null );
INSERT INTO user_roles VALUES('admin',1,1,1,1,1,1,1,1,1,1);
INSERT INTO user_roles VALUES('produksi',0,0,1,0,1,0,1,1,1,1);
INSERT INTO user_roles VALUES('gudang',0,0,1,1,1,1,0,0,1,0);
INSERT INTO user_roles VALUES('pelanggan',1,1,1,1,1,1,1,1,1,0);
CREATE TABLE users (   username text primary key,   password text,   user_role_name text,   created_at timestamp not null default current_timestamp,   status text check(status in ('active', 'deactivated')) default 'active',   foreign key (user_role_name) references user_roles(user_role_name) );
INSERT INTO users VALUES('medina','$2b$10$cJjniQOaHwsYgItJrrNfpu8TpNtnh8mkknXw9eLd8HNIaPNuRYCGu','admin','2025-08-26 00:03:26','active');
INSERT INTO users VALUES('jaya','$2b$10$Sj/TjHGpfqk3zZoYGEm.0uo4wnnowx4uYJGqxR3cxIP8JTQq7XfdC','produksi','2025-08-26 00:03:26','active');
INSERT INTO users VALUES('budi','$2b$10$Sj/TjHGpfqk3zZoYGEm.0uo4wnnowx4uYJGqxR3cxIP8JTQq7XfdC','gudang','2025-08-26 00:03:26','active');
INSERT INTO users VALUES('fuad','$2b$10$Sj/TjHGpfqk3zZoYGEm.0uo4wnnowx4uYJGqxR3cxIP8JTQq7XfdC','pelanggan','2025-08-26 00:03:26','active');
CREATE TABLE suppliers (   supplier_id integer primary key,   supplier_name text,   phone_number text,   email text,   address text,   username text,   foreign key (username) references users(username) );
INSERT INTO suppliers VALUES(1,'Latika%20Nasyidah','(+62)%20815%205277%201523','pratiwi.kusuma@yahoo.co.id','Ds.%20Tambak%20No.%20227,%20Gorontalo%2043883',NULL);
INSERT INTO suppliers VALUES(2,'Gada%20Saragih','(+62)%200815%208679%204459','clara.rahmawati@usada.or.id','Gg.%20Bakti%20No.%20968,%20Semarang%2025076',NULL);
INSERT INTO suppliers VALUES(3,'Elisa%20Lailasari','(+62)%20813%206322%207844','damu03@irawan.asia','Jln.%20Baing%20No.%20119,%20Padangpanjang%2056488',NULL);
INSERT INTO suppliers VALUES(4,'Edward%20Gunawan','(+62)%20812%206486%20347','egunawan83@yahoo.co.id','Jl.%20Urip%20Sumoharjo%20No.%20918,%20Tual%2068572',NULL);
INSERT INTO suppliers VALUES(5,'Yuliana%20Hasanah','(+62)%20814%200489%207499','abyasa17@yahoo.or.id','Jl.%20Ters.%20Kiaracondong%20No.%20146,%20Lubuklinggau%2029721',NULL);
CREATE TABLE catalogue (   catalogue_id integer primary key,   name text,   category text,   unit text );
INSERT INTO catalogue VALUES(1,'Arabica','Green%20Bean','Kg');
INSERT INTO catalogue VALUES(2,'Robusta','Roasted%20Bean','Kg');
INSERT INTO catalogue VALUES(3,'Liberica','Ground%20Coffee','Kg');
INSERT INTO catalogue VALUES(4,'Excelsa','Green%20Bean','Kg');
CREATE TABLE inventory (   product_id integer primary key,   supplier_id integer,   received_date date,   expiration_date date,   quantity integer,   unit_price decimal(10, 2),   storage_location text,   water_content integer,   note text,   catalogue_id integer,   foreign key (supplier_id) references suppliers(supplier_id),   foreign key (catalogue_id) references catalogue(catalogue_id) );
INSERT INTO inventory VALUES(1,1,'2025-08-01','2025-08-30',50,50000,'Rak%201',12,'Tanggal%20kadaluarsa%20sudah%20mendekati,%20mohon%20stock%20segera%20dihabiskan.',1);
INSERT INTO inventory VALUES(2,2,'2025-07-03','2025-09-27',200,40000,'Rak%202',9,'Diskon%20diberikan%20oleh%20supplier%20karena%20pembelian%20dengan%20jumlah%20banyak.',1);
INSERT INTO inventory VALUES(3,3,'2025-08-14','2025-10-18',100,60000,'Rak%203',NULL,'Tanggal%20kadaluarsa%20dari%20produk%20masih%20cukup%20lama,%20sehingga%20penjualan%20dapat%20dilakukan%20terlebih%20dahulu%20untuk%20produk%20lain.',1);
INSERT INTO inventory VALUES(4,5,'2025-08-09','2025-10-31',50,65000,'Karung%201',NULL,'Beberapa%20biji%20kopi%20yang%20didapatkan%20ada%20yang%20patah.',2);
INSERT INTO inventory VALUES(5,4,'2025-08-09','2025-12-31',100,45000,'Rak%203',12,'Kualitas%20biji%20kopi%20sangat%20baik.',2);
INSERT INTO inventory VALUES(6,2,'2025-07-11','2025-09-02',25,50000,'Karung%202',NULL,'Tanggal%20kadaluarsa%20produk%20sudah%20dekat.%20Mohon%20untuk%20dijual%20terlebih%20dahulu.',3);
INSERT INTO inventory VALUES(7,5,'2025-08-16','2025-10-09',10,60000,'Karung%204',NULL,'Jumlah%20biji%20kopi%20tinggal%20sedikit.',3);
INSERT INTO inventory VALUES(8,5,'2025-08-30','2025-09-25',0,50000,'Gentong%201',NULL,'Produk%20habis.',4);
INSERT INTO inventory VALUES(9,2,'2025-08-01','2025-10-10',0,48000,'Gentong%202',NULL,'Produk%20habis.',3);
CREATE TABLE tokens (   token_id integer primary key,   token text,   username text,   created_at timestamp not null default current_timestamp,   foreign key (username) references users(username) );
INSERT INTO tokens VALUES(1,'FD62bSc4fZv9w6SHbsQMWjeZEeiZYPuIMsvuTBk34lcqj9kQ7YBJUZdZwtewlpD8','medina','2025-08-26 00:08:13');
INSERT INTO tokens VALUES(2,'YpRQO4QlXAtZ1E6OYyK5uSSBcIQEQI238BCjfEgPSElxI9zQytIlcnR7wEdNtWji','budi','2025-08-26 00:39:01');
INSERT INTO tokens VALUES(3,'p2iAZ5REOFeYCbcWoMrKW3DMEZk3X4WNnuh4VumqiruuBUrFMYYSEqQJHP8EhDqs','jaya','2025-08-26 00:39:18');
CREATE TABLE orders (   order_id integer primary key,   created_date timestamp default current_timestamp,   note text,   username text,   supplier_id integer,   foreign key (username) references users(username),   foreign key (supplier_id) references suppliers(supplier_id) );
INSERT INTO orders VALUES(1,'2025-08-26 00:36:52','Pastikan%20bahwa%20biji%20kopi%20arabica%20yang%20diantarkan%20tidak%20rusak%20atau%20patah.','medina',1);
INSERT INTO orders VALUES(2,'2025-08-26 00:37:44','Mohon%20untuk%20biji%20kopi%20dibungkus%20dengan%20plastik%20yang%20di-vaccum.','medina',3);
INSERT INTO orders VALUES(3,'2025-08-26 00:38:39','Mohon%20untuk%20dikirim%20menggunakan%20kardus.','medina',5);
CREATE TABLE order_details (   order_detail_id integer primary key,   order_id integer,   catalogue_id integer,   quantity integer,   foreign key (order_id) references orders(order_id),   foreign key (catalogue_id) references catalogue(catalogue_id) );
INSERT INTO order_details VALUES(1,1,4,10);
INSERT INTO order_details VALUES(2,1,3,50);
INSERT INTO order_details VALUES(3,1,2,20);
INSERT INTO order_details VALUES(4,1,1,20);
INSERT INTO order_details VALUES(5,2,2,100);
INSERT INTO order_details VALUES(6,2,1,200);
INSERT INTO order_details VALUES(7,3,4,200);
